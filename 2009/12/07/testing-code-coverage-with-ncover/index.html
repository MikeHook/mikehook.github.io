
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>Testing code coverage with NCover - baking websites</title>
	<meta name="author" content="Mike Hook">

	
	<meta name="description" content="Testing Code Coverage With NCover I ve been developing the recipe book website mostly using TDD (Test Driven Design) and I thought it would be &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="baking websites" type="application/atom+xml">
	
	<link rel="canonical" href="http://bakingwebsites.co.uk/2009/12/07/testing-code-coverage-with-ncover/">
	<link href="http://bakingwebsites.co.uk/favicon.png" rel="shortcut icon">
	<link href="http://bakingwebsites.co.uk/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="http://bakingwebsites.co.uk/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!--
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"> 
-->
<link href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700" rel="stylesheet" type="text/css">

  
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-47738964-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	<img src="/images/bread-Sq-zoom-150.jpg" alt="Profile Picture" style="width: 160px;" />
</div>
<hgroup>
  <h1><a href="http://bakingwebsites.co.uk/">baking websites</a></h1>
  
    <h2>adventures in software development</h2>
  
</hgroup>

<nav id="main-nav"><h3>categories</h3>
<ul class="main-navigation">
<li class='category'><a href='/blog/categories/hacking/'>Hacking</a>[ 22 ]</li>
<li class='category'><a href='/blog/categories/progress/'>Progress</a>[ 4 ]</li>
<li class='category'><a href='/blog/categories/software-design/'>Software Design</a>[ 12 ]</li>
<li class='category'><a href='/blog/categories/testing/'>Testing</a>[ 2 ]</li>
<li class='category'><a href='/blog/categories/tips-and-tricks/'>Tips and Tricks</a>[ 8 ]</li>

</ul>
<br/>
<a href="http://bakingwebsites.co.uk/blog/archives">Archives</a>


</nav>
<nav id="sub-nav">
	<div class="social">
		
		
		
		
			<a class="twitter" href="http://twitter.com/michael_hook" title="Twitter">Twitter</a>
		
		
			<a class="github" href="https://github.com/MikeHook" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		
		
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">Testing Code Coverage With NCover</h1>
	<div class="entry-content" itemprop="articleBody"><p>I   ve been developing the recipe book website mostly using TDD (Test Driven Design) and I thought it would be interesting to measure the code coverage of my unit tests. After researching what tools were available it looked like <a href="http://www.ncover.com/">NCover</a> was the best fit for the sites technology stack. The commercial version has some good features, such as measures for cyclomatic complexity, however it is a bit out of my budget (of approximately   0!). Fortunately a <a href="http://www.ncover.com/download/community">community edition of NCover</a> is also available for free and it stills works just fine for analysing current .NET assemblies.</p>

<p>After installing NCover a console application is available for running code coverage analysis. I got this up and running but the command line interface isn   t exactly the most user friendly and the output is just a single summary report. I obviously wasn   t alone in these conclusions because back in 2006 Grant Drake developed the <a href="http://www.kiwidude.com/blog/2006/01/ncoverexplorer-debut.html">NCoverExplorer tool</a> to provide a GUI front end to NCover. This tool also has a community edition available (version 1.4) that works with the community edition of NCover.</p>

<h4>Starters - Setting up NCover Explorer</h4>


<p>The tool is fairly straight forward to setup, the NCover website includes instructions on how to setup the professional edition to <a href="http://docs.ncover.com/how-to/running-ncover-with-your-unit-testing-framework/nunit/">profile an NUnit test project</a>, and the settings are equivalent in the community edition. I also chose to specify which assemblies should be included in the coverage report as otherwise all the Sharp Architecture assemblies are included and the results are skewed.</p>

<p>After running the tool you are provided with an interactive view of the assemblies with the uncovered lines displayed in red. You can see how easy it is to identify the offending lines in the screen grab below:</p>

<p><a style="margin-bottom:1em;margin-right:1em;" href="http://4.bp.blogspot.com/_5hQeqbPSrks/Sx15F3sFlqI/AAAAAAAAAA8/yrLagOXdmxc/s1600/NCoverExplorer2.jpg"><img src="http://lh3.ggpht.com/_5hQeqbPSrks/Sx1745WamzI/AAAAAAAAAB4/PAdEtdGUeBE/s800/NCoverExplorer2.jpg" border="0" alt="" /></a></p>

<h4>The Main Course     Improving code coverage</h4>


<p>The results of my first report are shown below:</p>

<p><a href="http://imageshack.com/a/img268/8057/6zqn.jpg"><img class="alignnone size-full wp-image-31" title="NCover Report" src="http://imageshack.com/a/img268/8057/6zqn.jpg" alt="" /></a></p>

<p>The prime candidates for improvement were:</p>

<ul>
    <li>The RecipeBook.Data assembly. A couple of repository classes were not tested.</li>
    <li>The RecipeBook.Web.Controllers assembly. Some of the code paths in the controller methods were not covered.</li>
    <li>The RecipeBook.ApplicationServices assembly. Not tested at all, oops!</li>
</ul>


<p>By default NCover sets the acceptable coverage level at 95%, however I felt that this was overly strict. I would rather spend the time writing fewer tests that I ensure are of a high quality than writing tests just to cover every single line of code. So I reduced the threshold to 80% and added tests to cover the essential missing features. Below if my much more healthy looking report.</p>

<h4>For Desert     A report without the red sauce</h4>


<p>OK maybe I   m stretching the food analogy a little too far with my headings now! By red sauce I mean those nasty red bars that were blazed across nearly every line of the report. Below you can see the report looks much more healthy after adding some unit tests and trimming some unused code:</p>

<p><a href="http://imageshack.com/a/img163/5125/23o5.jpg"><img class="alignnone size-full wp-image-32" title="NCover Report - 80% coverage" src="http://imageshack.com/a/img163/5125/23o5.jpg" alt="" /></a></p>

<p>I will endeavour to keep the coverage level at a minimum of 80% from now, and hopefully add some more tests to bump off those remaining pesky red bars!</p>

<p>As usual, any comments on this post are welcome. :)</p>
</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>


</div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright &copy; 2014 - Mike Hook -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
</footer>
			

<script type="text/javascript">
      var disqus_shortname = 'bakingwebsites';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





		</div>
	</div>
</body>
</html>
